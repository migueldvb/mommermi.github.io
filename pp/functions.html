

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Functions &mdash; Photometry Pipeline 0.9 documentation</title>
    
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="top" title="Photometry Pipeline 0.9 documentation" href="index.html" />
    <link rel="next" title="Diagnostics" href="diagnostics.html" />
    <link rel="prev" title="Supported Observatories" href="supported.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="diagnostics.html" title="Diagnostics"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="supported.html" title="Supported Observatories"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Photometry Pipeline 0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="supported.html"
                        title="previous chapter">Supported Observatories</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="diagnostics.html"
                        title="next chapter">Diagnostics</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/functions.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="functions">
<h1>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h1>
<p>The individual pipeline functions are introduced and explained
below. All functions presented here can be called from the terminal.</p>
<dl class="function">
<dt id="pp_run">
<code class="descname">pp_run</code><span class="sig-paren">(</span><span class="optional">[</span><em>-prefix string</em>, <span class="optional">]</span><span class="optional">[</span><em>-target string</em>, <span class="optional">]</span><em>images</em><span class="sig-paren">)</span><a class="headerlink" href="#pp_run" title="Permalink to this definition">¶</a></dt>
<dd><p>serves as a wrapper for all the individual pipeline processes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-prefix</strong> &#8211; (optional) the prefix of all science data images if
<cite>pp_run</cite> is called using <code class="docutils literal"><span class="pre">images</span> <span class="pre">=</span> <span class="pre">all</span></code></li>
<li><strong>-target</strong> &#8211; (optional) the target name to be used in all
images, this overrides the <code class="docutils literal"><span class="pre">OBJECT</span></code> keyword in the
FITS headers; note to replace blanks with
underscores if the target&#8217;s name is a designation</li>
<li><strong>images</strong> &#8211; images on which the pipeline is supposed to run,
wildcard symbols (<code class="docutils literal"><span class="pre">'*'</span></code>, <code class="docutils literal"><span class="pre">'?'</span></code>) can be used; or,
by using <code class="docutils literal"><span class="pre">all</span></code>, PP runs on all FITS files in
underlying directories (the range of images can be
limited by using the <cite>-prefix</cite> option)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The use of <cite>pp_run</cite> is discussed in the <a class="reference internal" href="quickstart.html#quickstart"><span>Quickstart</span></a> reference.</p>
<p>This wrapper should work successfully for most data sets. If the
analysis fails at some point - or provides inadequate results -
every single step in the pipeline can be run manually, providing
the possibility to manually tweak the process parameters.</p>
</dd></dl>

<p>The following functions describe the individual pipeline processes in
the logical order:</p>
<dl class="function">
<dt id="pp_prepare">
<code class="descname">pp_prepare</code><span class="sig-paren">(</span><span class="optional">[</span><em>-ra degrees</em>, <span class="optional">]</span><span class="optional">[</span><em>-dec degrees</em>, <span class="optional">]</span><span class="optional">[</span><em>-flipx</em>, <span class="optional">]</span><span class="optional">[</span><em>-flipy</em>, <span class="optional">]</span><span class="optional">[</span><em>-rotate degrees</em>, <span class="optional">]</span><em>images</em><span class="sig-paren">)</span><a class="headerlink" href="#pp_prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>prepares image files for use in the pipeline</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-ra</strong> &#8211; (optional) manually sets the frame center RA</li>
<li><strong>-dec</strong> &#8211; (optional) manually sets the frame center declination</li>
<li><strong>-flipx</strong> &#8211; (optional) forces the image&#8217;s x-axis to be flipped
in wcs coordinates relative to the respective
<a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> setting</li>
<li><strong>-flipy</strong> &#8211; (optional) forces the image&#8217;s y-axis to be flipped
in wcs coordinates relative to the respective
<a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> setting</li>
<li><strong>-rotate</strong> &#8211; (optional) rotates the image&#8217;s orientation in the sky
(East-of-North) relative to the respective
<a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> setting</li>
<li><strong>images</strong> &#8211; images on which <cite>pp_prepare</cite> is supposed to run</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function prepares the image data by creating necessary FITS
header keywords (e.g., the observation midtime <code class="docutils literal"><span class="pre">MIDTIMJD</span></code>, the
pixel scale <code class="docutils literal"><span class="pre">SECPIX</span></code>, ...), and by including fake wcs information
that is required by <a class="reference external" href="http://www.astromatic.net/software/scamp">SCAMP</a>. Existing wcs information are deleted,
as they might cause confusion with those information generatd by
<cite>SCAMP</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="pp_extract">
<code class="descname">pp_extract</code><span class="sig-paren">(</span><span class="optional">[</span><em>-snr float</em>, <span class="optional">]</span><span class="optional">[</span><em>-minarea integer</em>, <span class="optional">]</span><span class="optional">[</span><em>-paramfile path</em>, <span class="optional">]</span><span class="optional">[</span><em>-aprad float</em>, <span class="optional">]</span><span class="optional">[</span><em>-telescope name</em>, <span class="optional">]</span><span class="optional">[</span><em>-quiet</em>, <span class="optional">]</span><span class="optional">[</span><em>-write_cat</em>, <span class="optional">]</span><em>images</em><span class="sig-paren">)</span><a class="headerlink" href="#pp_extract" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper for <a class="reference external" href="http://www.astromatic.net/software/sextractor">Source Extractor</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-snr</strong> &#8211; (optional) minimum SNR of sources to be extracted, default: 1.5</li>
<li><strong>-minarea</strong> &#8211; (optional) minimum number of connected pixels
above the SNR threshold for a valid source,
default: 3</li>
<li><strong>-paramfile</strong> &#8211; (optional) manual override for the <cite>Source
Extractor</cite> parameter file</li>
<li><strong>-aprad</strong> &#8211; (optional) aperture photometry aperture radius in
pixels; if no aperture radius is given here, the
default aperture radius for this
telescope/instrument combination is used (see
<a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> reference)</li>
<li><strong>-telescope</strong> &#8211; (optional) manual override for the telescope
identifier (see <a class="reference internal" href="supported.html#supported-observatories"><span>Supported Observatories</span></a>)</li>
<li><strong>-quiet</strong> &#8211; (optional) suppress output on the screen</li>
<li><strong>images</strong> &#8211; images to run <cite>pp_extract</cite> on</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><cite>pp_extract</cite> is automatically called by <a class="reference internal" href="#pp_register" title="pp_register"><code class="xref py py-func docutils literal"><span class="pre">pp_register()</span></code></a> and
<a class="reference internal" href="#pp_photometry" title="pp_photometry"><code class="xref py py-func docutils literal"><span class="pre">pp_photometry()</span></code></a>. Usually, there is no reason to call this
function manually.</p>
</dd></dl>

<dl class="function">
<dt id="pp_register">
<code class="descname">pp_register</code><span class="sig-paren">(</span><span class="optional">[</span><em>-snr float</em>, <span class="optional">]</span><span class="optional">[</span><em>-minarea integer</em>, <span class="optional">]</span><span class="optional">[</span><em>-aprad float</em>, <span class="optional">]</span><span class="optional">[</span><em>-cat catalogname</em>, <span class="optional">]</span><em>images</em><span class="sig-paren">)</span><a class="headerlink" href="#pp_register" title="Permalink to this definition">¶</a></dt>
<dd><p>astrometric calibration of the input images using <a class="reference external" href="http://www.astromatic.net/software/scamp">SCAMP</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-snr</strong> &#8211; (optional) minimum SNR of sources to be extracted for
the registration, default: 3</li>
<li><strong>-minarea</strong> &#8211; (optional) minimum number of connected pixels
above the SNR threshold for a valid source,
default: <a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> setting</li>
<li><strong>-aprad</strong> &#8211; (optional) aperture photometry aperture radius in
pixels; if no aperture radius is given here, the
default aperture radius for this
telescope/instrument combination is used (see
<a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> reference)</li>
<li><strong>-cat</strong> &#8211; (optional) reference catalog override for astrometric
calibration (a list of supported catalogs is listed
here: <a class="reference internal" href="supported.html#supported-catalogs"><span>Supported Reference Catalogs</span></a>); if not specific
catalog is requested, those listed in the
<a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> reference are tried</li>
<li><strong>images</strong> &#8211; images to run <cite>pp_register</cite> on</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>First of all, <cite>pp_register</cite> calls <a class="reference internal" href="#pp_extract" title="pp_extract"><code class="xref py py-func docutils literal"><span class="pre">pp_extract()</span></code></a> to identify
sources in the field of view. ...</p>
</dd></dl>

<dl class="function">
<dt id="pp_photometry">
<code class="descname">pp_photometry</code><span class="sig-paren">(</span><span class="optional">[</span><em>-snr float</em>, <span class="optional">]</span><span class="optional">[</span><em>-minarea float</em>, <span class="optional">]</span><span class="optional">[</span><em>-aprad float</em>, <span class="optional">]</span><span class="optional">[</span><em>-target targetname</em>, <span class="optional">]</span><span class="optional">[</span><em>-background_only</em>, <span class="optional">]</span><span class="optional">[</span><em>-target_only</em>, <span class="optional">]</span><em>images)</em><span class="sig-paren">)</span><a class="headerlink" href="#pp_photometry" title="Permalink to this definition">¶</a></dt>
<dd><p>curve-of-growth analysis of the input images and source extraction
using the derived aperture radius resulting in final instrumental
magnitudes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-snr</strong> &#8211; (optional) minimum SNR of sources to be accounted for
in the analysis, default: 2</li>
<li><strong>-minarea</strong> &#8211; (optional) minimum number of connected pixels
above the SNR threshold for a valid source,
default: <a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> setting</li>
<li><strong>-aprad</strong> &#8211; (optional) if this option is used, the
curve-of-growth analysis is skipped and instrumental
magnitudes are derived with this aperture radius</li>
<li><strong>-target</strong> &#8211; the target name to be used in all
images, this overrides the <code class="docutils literal"><span class="pre">OBJECT</span></code> keyword in the
FITS headers; note to replace blanks with
underscores if the target&#8217;s name is a designation</li>
<li><strong>-background_only</strong> &#8211; only account for background sources in the
curve-of-growth analysis</li>
<li><strong>-target_only</strong> &#8211; only account for the target in the
curve-of-growth analysis</li>
<li><strong>image</strong> &#8211; images to run <cite>pp_photometry</cite> on</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Aperture finding strategies and stuff...</p>
</dd></dl>

<dl class="function">
<dt id="pp_calibrate">
<code class="descname">pp_calibrate</code><span class="sig-paren">(</span><span class="optional">[</span><em>-minstars int/float</em>, <span class="optional">]</span><span class="optional">[</span><em>-catalog string</em>, <span class="optional">]</span><span class="optional">[</span><em>-filter string</em>, <span class="optional">]</span><em>images</em><span class="sig-paren">)</span><a class="headerlink" href="#pp_calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>photometric calibration of each input frame in one specific filter</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-minstars</strong> &#8211; (optional) minimum number of reference stars used
in the photometric calibration; if <code class="docutils literal"><span class="pre">int</span></code>, use
at least this number of stars; if <code class="docutils literal"><span class="pre">float</span></code> use
at least this fraction of the available reference
stars; if this option is not used, the default is
0.5 (i.e., use at least 50% of all available
reference stars)</li>
<li><strong>-catalog</strong> &#8211; (optional) manual override for the reference
catalog; a list of available reference catalogs
is available here: <a class="reference internal" href="supported.html#supported-catalogs"><span>Supported Reference Catalogs</span></a>) or
using this routine&#8217;s help function; if this
option is not used, the photometric reference
catalogs list in the <a class="reference internal" href="install.html#telescope-setup"><span>Telescope Setup</span></a> are
used</li>
<li><strong>-filter</strong> &#8211; (optional) manual override for the filter used in
the observations; if this option is not used, the
filter name is read from the image FITS headers</li>
<li><strong>images</strong> &#8211; images to run <cite>pp_calibrate</cite> on</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Details on the calibration process....</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">pp_distill ([-target string], [-offset float float],</code></dt>
<dt>
<code class="descname">[-fixed_coo float float], images)</code></dt>
<dd><p>extraction of calibrated photometry for targets</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>-target</strong> &#8211; (optional) the target name to be used in all
images, this overrides the <code class="docutils literal"><span class="pre">OBJECT</span></code> keyword in the
FITS headers; note to replace blanks with
underscores if the target&#8217;s name is a designation</li>
<li><strong>-offset</strong> &#8211; (optional) position offset to apply on target
positions (e.g., Horizons position for moving
targets) in arcsec; requires two floats, one for RA
and one for Dec</li>
<li><strong>-fixed_coo</strong> &#8211; (optional) fixed target position (requires two
floats, one for RA and one for Dec, coordinates in degrees)</li>
<li><strong>images</strong> &#8211; images to run <cite>pp_distill</cite> on</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function will automatically read the target name from the FITS
images (or use the manually provided one), pull target positions
from JPL Horizons, and extract calibrated photometry from the
database catalogs created with <a class="reference internal" href="#pp_calibrate" title="pp_calibrate"><code class="xref py py-func docutils literal"><span class="pre">pp_calibrate()</span></code></a> in to a
<code class="docutils literal"><span class="pre">photometry_&lt;targetname&gt;.dat</span></code> file. In addition to the primary
target, this function also creates a photometry output file for one
relatively bright star that is present in the first and the last
image of the series - this star serves as a control star to check
the consistency of the derive magnitude zeropoints.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="diagnostics.html" title="Diagnostics"
             >next</a> |</li>
        <li class="right" >
          <a href="supported.html" title="Supported Observatories"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Photometry Pipeline 0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Michael Mommert.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>